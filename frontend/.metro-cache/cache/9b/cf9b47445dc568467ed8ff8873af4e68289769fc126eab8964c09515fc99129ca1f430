{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":87,"index":177}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../services/notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":178},"end":{"line":3,"column":93,"index":271}}],"key":"PilFUkBfYpg1cVGLNRiWDw/oULQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  var _servicesNotifications = require(_dependencyMap[2], \"../services/notifications\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n\n    // Check for existing token on app start\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n    const checkAuthStatus = async () => {\n      try {\n        const token = await (0, _servicesApi.getAuthToken)();\n        if (token) {\n          const userData = await _servicesApi.authAPI.getCurrentUser();\n          setUser(userData);\n          // Register for push notifications after successful auth check\n          setupPushNotifications();\n        }\n      } catch (error) {\n        console.log('No valid session found');\n        await (0, _servicesApi.removeAuthToken)();\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const setupPushNotifications = async () => {\n      try {\n        const token = await (0, _servicesNotifications.registerForPushNotificationsAsync)();\n        if (token) {\n          await (0, _servicesNotifications.savePushToken)(token);\n        }\n      } catch (error) {\n        console.error('Push notification setup error:', error);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        setIsLoading(true);\n        const response = await _servicesApi.authAPI.login(email, password);\n        if (response.access_token) {\n          await (0, _servicesApi.setAuthToken)(response.access_token);\n          setUser(response.user);\n          // Register for push notifications after login\n          setupPushNotifications();\n          return {\n            success: true\n          };\n        }\n        return {\n          success: false,\n          error: 'Invalid response from server'\n        };\n      } catch (error) {\n        const errorMessage = error.response?.data?.detail || 'Login failed. Please check your credentials.';\n        return {\n          success: false,\n          error: errorMessage\n        };\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        await (0, _servicesApi.removeAuthToken)();\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"YajQB7LURzRD+QP5gw0+K2TZIWA=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":117,"map":[[10,2,21,0,"exports"],[10,9,21,0],[10,10,21,0,"AuthProvider"],[10,22,21,0],[10,25,21,0,"AuthProvider"],[10,37,21,0],[11,2,103,0,"exports"],[11,9,103,0],[11,10,103,0,"useAuth"],[11,17,103,0],[11,20,103,0,"useAuth"],[11,27,103,0],[12,2,1,0],[12,6,1,0,"_react"],[12,12,1,0],[12,15,1,0,"require"],[12,22,1,0],[12,23,1,0,"_dependencyMap"],[12,37,1,0],[13,2,2,0],[13,6,2,0,"_servicesApi"],[13,18,2,0],[13,21,2,0,"require"],[13,28,2,0],[13,29,2,0,"_dependencyMap"],[13,43,2,0],[14,2,3,0],[14,6,3,0,"_servicesNotifications"],[14,28,3,0],[14,31,3,0,"require"],[14,38,3,0],[14,39,3,0,"_dependencyMap"],[14,53,3,0],[15,2,3,93],[15,6,3,93,"_reactJsxDevRuntime"],[15,25,3,93],[15,28,3,93,"require"],[15,35,3,93],[15,36,3,93,"_dependencyMap"],[15,50,3,93],[16,2,19,0],[16,8,19,6,"AuthContext"],[16,19,19,17],[16,35,19,20],[16,39,19,20,"createContext"],[16,45,19,33],[16,46,19,33,"createContext"],[16,59,19,33],[16,61,19,63,"undefined"],[16,70,19,72],[16,71,19,73],[17,2,21,7],[17,11,21,16,"AuthProvider"],[17,23,21,28,"AuthProvider"],[17,24,21,29],[18,4,21,31,"children"],[19,2,21,65],[19,3,21,66],[19,5,21,68],[20,4,21,68,"_s"],[20,6,21,68],[21,4,22,2],[21,10,22,8],[21,11,22,9,"user"],[21,15,22,13],[21,17,22,15,"setUser"],[21,24,22,22],[21,25,22,23],[21,28,22,26],[21,32,22,26,"useState"],[21,38,22,34],[21,39,22,34,"useState"],[21,47,22,34],[21,49,22,48],[21,53,22,52],[21,54,22,53],[22,4,23,2],[22,10,23,8],[22,11,23,9,"isLoading"],[22,20,23,18],[22,22,23,20,"setIsLoading"],[22,34,23,32],[22,35,23,33],[22,38,23,36],[22,42,23,36,"useState"],[22,48,23,44],[22,49,23,44,"useState"],[22,57,23,44],[22,59,23,45],[22,63,23,49],[22,64,23,50],[24,4,25,2],[25,4,26,2],[25,8,26,2,"useEffect"],[25,14,26,11],[25,15,26,11,"useEffect"],[25,24,26,11],[25,26,26,12],[25,32,26,18],[26,6,27,4,"checkAuthStatus"],[26,21,27,19],[26,22,27,20],[26,23,27,21],[27,4,28,2],[27,5,28,3],[27,7,28,5],[27,9,28,7],[27,10,28,8],[28,4,30,2],[28,10,30,8,"checkAuthStatus"],[28,25,30,23],[28,28,30,26],[28,34,30,26,"checkAuthStatus"],[28,35,30,26],[28,40,30,38],[29,6,31,4],[29,10,31,8],[30,8,32,6],[30,14,32,12,"token"],[30,19,32,17],[30,22,32,20],[30,28,32,26],[30,32,32,26,"getAuthToken"],[30,44,32,38],[30,45,32,38,"getAuthToken"],[30,57,32,38],[30,59,32,39],[30,60,32,40],[31,8,33,6],[31,12,33,10,"token"],[31,17,33,15],[31,19,33,17],[32,10,34,8],[32,16,34,14,"userData"],[32,24,34,22],[32,27,34,25],[32,33,34,31,"authAPI"],[32,45,34,38],[32,46,34,38,"authAPI"],[32,53,34,38],[32,54,34,39,"getCurrentUser"],[32,68,34,53],[32,69,34,54],[32,70,34,55],[33,10,35,8,"setUser"],[33,17,35,15],[33,18,35,16,"userData"],[33,26,35,24],[33,27,35,25],[34,10,36,8],[35,10,37,8,"setupPushNotifications"],[35,32,37,30],[35,33,37,31],[35,34,37,32],[36,8,38,6],[37,6,39,4],[37,7,39,5],[37,8,39,6],[37,15,39,13,"error"],[37,20,39,18],[37,22,39,20],[38,8,40,6,"console"],[38,15,40,13],[38,16,40,14,"log"],[38,19,40,17],[38,20,40,18],[38,44,40,42],[38,45,40,43],[39,8,41,6],[39,14,41,12],[39,18,41,12,"removeAuthToken"],[39,30,41,27],[39,31,41,27,"removeAuthToken"],[39,46,41,27],[39,48,41,28],[39,49,41,29],[40,6,42,4],[40,7,42,5],[40,16,42,14],[41,8,43,6,"setIsLoading"],[41,20,43,18],[41,21,43,19],[41,26,43,24],[41,27,43,25],[42,6,44,4],[43,4,45,2],[43,5,45,3],[44,4,47,2],[44,10,47,8,"setupPushNotifications"],[44,32,47,30],[44,35,47,33],[44,41,47,33,"setupPushNotifications"],[44,42,47,33],[44,47,47,45],[45,6,48,4],[45,10,48,8],[46,8,49,6],[46,14,49,12,"token"],[46,19,49,17],[46,22,49,20],[46,28,49,26],[46,32,49,26,"registerForPushNotificationsAsync"],[46,54,49,59],[46,55,49,59,"registerForPushNotificationsAsync"],[46,88,49,59],[46,90,49,60],[46,91,49,61],[47,8,50,6],[47,12,50,10,"token"],[47,17,50,15],[47,19,50,17],[48,10,51,8],[48,16,51,14],[48,20,51,14,"savePushToken"],[48,42,51,27],[48,43,51,27,"savePushToken"],[48,56,51,27],[48,58,51,28,"token"],[48,63,51,33],[48,64,51,34],[49,8,52,6],[50,6,53,4],[50,7,53,5],[50,8,53,6],[50,15,53,13,"error"],[50,20,53,18],[50,22,53,20],[51,8,54,6,"console"],[51,15,54,13],[51,16,54,14,"error"],[51,21,54,19],[51,22,54,20],[51,54,54,52],[51,56,54,54,"error"],[51,61,54,59],[51,62,54,60],[52,6,55,4],[53,4,56,2],[53,5,56,3],[54,4,58,2],[54,10,58,8,"login"],[54,15,58,13],[54,18,58,16],[54,24,58,16,"login"],[54,25,58,23,"email"],[54,30,58,36],[54,32,58,38,"password"],[54,40,58,54],[54,45,58,106],[55,6,59,4],[55,10,59,8],[56,8,60,6,"setIsLoading"],[56,20,60,18],[56,21,60,19],[56,25,60,23],[56,26,60,24],[57,8,61,6],[57,14,61,12,"response"],[57,22,61,20],[57,25,61,23],[57,31,61,29,"authAPI"],[57,43,61,36],[57,44,61,36,"authAPI"],[57,51,61,36],[57,52,61,37,"login"],[57,57,61,42],[57,58,61,43,"email"],[57,63,61,48],[57,65,61,50,"password"],[57,73,61,58],[57,74,61,59],[58,8,63,6],[58,12,63,10,"response"],[58,20,63,18],[58,21,63,19,"access_token"],[58,33,63,31],[58,35,63,33],[59,10,64,8],[59,16,64,14],[59,20,64,14,"setAuthToken"],[59,32,64,26],[59,33,64,26,"setAuthToken"],[59,45,64,26],[59,47,64,27,"response"],[59,55,64,35],[59,56,64,36,"access_token"],[59,68,64,48],[59,69,64,49],[60,10,65,8,"setUser"],[60,17,65,15],[60,18,65,16,"response"],[60,26,65,24],[60,27,65,25,"user"],[60,31,65,29],[60,32,65,30],[61,10,66,8],[62,10,67,8,"setupPushNotifications"],[62,32,67,30],[62,33,67,31],[62,34,67,32],[63,10,68,8],[63,17,68,15],[64,12,68,17,"success"],[64,19,68,24],[64,21,68,26],[65,10,68,31],[65,11,68,32],[66,8,69,6],[67,8,70,6],[67,15,70,13],[68,10,70,15,"success"],[68,17,70,22],[68,19,70,24],[68,24,70,29],[69,10,70,31,"error"],[69,15,70,36],[69,17,70,38],[70,8,70,69],[70,9,70,70],[71,6,71,4],[71,7,71,5],[71,8,71,6],[71,15,71,13,"error"],[71,20,71,23],[71,22,71,25],[72,8,72,6],[72,14,72,12,"errorMessage"],[72,26,72,24],[72,29,72,27,"error"],[72,34,72,32],[72,35,72,33,"response"],[72,43,72,41],[72,45,72,43,"data"],[72,49,72,47],[72,51,72,49,"detail"],[72,57,72,55],[72,61,72,59],[72,107,72,105],[73,8,73,6],[73,15,73,13],[74,10,73,15,"success"],[74,17,73,22],[74,19,73,24],[74,24,73,29],[75,10,73,31,"error"],[75,15,73,36],[75,17,73,38,"errorMessage"],[76,8,73,51],[76,9,73,52],[77,6,74,4],[77,7,74,5],[77,16,74,14],[78,8,75,6,"setIsLoading"],[78,20,75,18],[78,21,75,19],[78,26,75,24],[78,27,75,25],[79,6,76,4],[80,4,77,2],[80,5,77,3],[81,4,79,2],[81,10,79,8,"logout"],[81,16,79,14],[81,19,79,17],[81,25,79,17,"logout"],[81,26,79,17],[81,31,79,29],[82,6,80,4],[82,10,80,8],[83,8,81,6],[83,14,81,12],[83,18,81,12,"removeAuthToken"],[83,30,81,27],[83,31,81,27,"removeAuthToken"],[83,46,81,27],[83,48,81,28],[83,49,81,29],[84,8,82,6,"setUser"],[84,15,82,13],[84,16,82,14],[84,20,82,18],[84,21,82,19],[85,6,83,4],[85,7,83,5],[85,8,83,6],[85,15,83,13,"error"],[85,20,83,18],[85,22,83,20],[86,8,84,6,"console"],[86,15,84,13],[86,16,84,14,"error"],[86,21,84,19],[86,22,84,20],[86,37,84,35],[86,39,84,37,"error"],[86,44,84,42],[86,45,84,43],[87,6,85,4],[88,4,86,2],[88,5,86,3],[89,4,88,2],[89,24,89,4],[89,28,89,4,"_reactJsxDevRuntime"],[89,47,89,4],[89,48,89,4,"jsxDEV"],[89,54,89,4],[89,56,89,5,"AuthContext"],[89,67,89,16],[89,68,89,17,"Provider"],[89,76,89,25],[90,6,90,6,"value"],[90,11,90,11],[90,13,90,13],[91,8,91,8,"user"],[91,12,91,12],[92,8,92,8,"isLoading"],[92,17,92,17],[93,8,93,8,"isAuthenticated"],[93,23,93,23],[93,25,93,25],[93,26,93,26],[93,27,93,27,"user"],[93,31,93,31],[94,8,94,8,"login"],[94,13,94,13],[95,8,95,8,"logout"],[96,6,96,6],[96,7,96,8],[97,6,96,8,"children"],[97,14,96,8],[97,16,98,7,"children"],[98,4,98,15],[99,6,98,15,"fileName"],[99,14,98,15],[99,16,98,15,"_jsxFileName"],[99,28,98,15],[100,6,98,15,"lineNumber"],[100,16,98,15],[101,6,98,15,"columnNumber"],[101,18,98,15],[102,4,98,15],[102,11,99,26],[102,12,99,27],[103,2,101,0],[104,2,101,1,"_s"],[104,4,101,1],[104,5,21,16,"AuthProvider"],[104,17,21,28],[105,2,21,28,"_c"],[105,4,21,28],[105,7,21,16,"AuthProvider"],[105,19,21,28],[106,2,103,7],[106,11,103,16,"useAuth"],[106,18,103,23,"useAuth"],[106,19,103,23],[106,21,103,26],[107,4,103,26,"_s2"],[107,7,103,26],[108,4,104,2],[108,10,104,8,"context"],[108,17,104,15],[108,20,104,18],[108,24,104,18,"useContext"],[108,30,104,28],[108,31,104,28,"useContext"],[108,41,104,28],[108,43,104,29,"AuthContext"],[108,54,104,40],[108,55,104,41],[109,4,105,2],[109,8,105,6,"context"],[109,15,105,13],[109,20,105,18,"undefined"],[109,29,105,27],[109,31,105,29],[110,6,106,4],[110,12,106,10],[110,16,106,14,"Error"],[110,21,106,19],[110,22,106,20],[110,67,106,65],[110,68,106,66],[111,4,107,2],[112,4,108,2],[112,11,108,9,"context"],[112,18,108,16],[113,2,109,0],[114,2,109,1,"_s2"],[114,5,109,1],[114,6,103,16,"useAuth"],[114,13,103,23],[115,2,103,23],[115,6,103,23,"_c"],[115,8,103,23],[116,2,103,23,"$RefreshReg$"],[116,14,103,23],[116,15,103,23,"_c"],[116,17,103,23],[117,0,103,23],[117,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthStatus","setupPushNotifications","login","logout","useAuth"],"mappings":"AAA;OCoB;YCK;GDE;0BEE;GFe;iCGE;GHS;gBIE;GJmB;iBKE;GLO;CDe;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}